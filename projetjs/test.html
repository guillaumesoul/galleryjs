<?php
// on se connecte à notre base
$base = mysql_connect ('localhost', 'root', 'root');  
mysql_select_db ('galleriejs', $base) ;  
?>
<html>
<head>
<title>Numéro de téléphone du membre choisi</title>
</head>
<body>
<?php
// on teste si notre variable est déclarée
if (isset($_POST['nom_proprio'])) { 
 
      // lancement de la requête
      $sql = 'SELECT telephone FROM liste_proprietaire WHERE nom = "'.$_POST['nom_proprio'].'"'; 
 
      // on lance la requête (mysql_query) et on impose un message d'erreur si la requête ne se passe pas bien (or die)
      $req = mysql_query($sql) or die('Erreur SQL !<br />'.$sql.'<br />'.mysql_error()); 
 
      // on récupère le résultat sous forme d'un tableau
      $data = mysql_fetch_array($req); 
 
      // on libère l'espace mémoire alloué pour cette interrogation de la base
      mysql_free_result ($req); 
      mysql_close (); 
      
// on affiche le résultat
      echo 'Le numéro de téléphone est : '.$data['telephone'];  
}  
else { 
      echo 'La variable nom_proprio n\'est pas déclarée';  
}  
?> 
</body>
</html> 